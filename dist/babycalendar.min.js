class BabyCalendar extends HTMLElement{constructor(){super(),this._daysOfTheWeek=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this._months=["January","February","March","April","May","June","July","August","September","October","November","December"],this._navigationMonthID="",this._navigationMonthEl=null,this._headerEl=null,this._bodyElID="",this._bodyEl=null;let t=new Date;var e=this.getAttribute("shownavigation");this._showNavigation="true"===e||"1"===e||"yes"===e,this._month=parseInt(this.getAttribute("month"))||t.getMonth(),this._year=parseInt(this.getAttribute("year"))||t.getFullYear()}connectedCallback(){this._render()}get showNavigation(){return this._showNavigation}set showNavigation(t){this._showNavigation=t,this.setAttribute("shownavigation",t),this.redraw()}get month(){return this._month}set month(t){this._month=parseInt(t),this.setAttribute("month",t)}get year(){return this._year}set year(t){this._year=parseInt(t),this.setAttribute("year",t)}nextMonth(){this._onRightClick()}previousMonth(){this._onLeftClick()}redraw(){this._showNavigation&&this._updateNavigation(),this._updateBody()}today(){let t=new Date;this._month=t.getMonth(),this._year=t.getFullYear(),this.redraw(),this._dispatchChangeMonth()}_dispatchChangeMonth(){this.dispatchEvent(new CustomEvent("babycalendar-changemonth",{detail:{month:this._month,year:this._year}}))}_dispatchDaySelected(t){this.dispatchEvent(new CustomEvent("babycalendar-dayselected",{detail:{month:this._month,year:this._year,day:t}}))}_generateRandomID(t){return`${t}-${Date.now()}`}_getFirstDayOfMonth(){let t=new Date(this._year,this._month);return new Date(t.getFullYear(),t.getMonth(),1)}_getLastDayOfMonth(){let t=new Date(this._year,this._month);return new Date(t.getFullYear(),t.getMonth()+1,0)}_onDayClick(t){t.preventDefault(),t.stopPropagation();let e=0;e="A"===t.target.tagName?parseInt(t.target.innerText):(t=t.target.children[0],parseInt(t.innerText)),this._dispatchDaySelected(e)}_onLeftClick(){this._month--,this._month<0&&(this._month=11,this._year--),this.redraw(),this._dispatchChangeMonth()}_onRightClick(){this._month++,11<this._month&&(this._month=0,this._year++),this.redraw(),this._dispatchChangeMonth()}_render(){this.classList.add("babycalendar"),this._showNavigation&&this._renderNavigation(),this._renderHeader(),this._renderBody()}_renderNavigation(){var t=this._drawNavigation();this.insertAdjacentElement("beforeend",t),this._updateNavigation()}_renderHeader(){let e=document.createElement("div");e.classList.add("header-row"),this._daysOfTheWeek.forEach(t=>{this._renderHeaderDayCell(e,t)}),this._headerEl=e,this.insertAdjacentElement("beforeend",this._headerEl)}_renderHeaderDayCell(t,e){let n=document.createElement("div");n.classList.add("header-day"),n.innerText=e,t.insertAdjacentElement("beforeend",n)}_renderBody(){this._bodyEl=this._drawBody(),this._bodyElID=this._generateRandomID("body"),this._bodyEl.id=this._bodyElID,this.insertAdjacentElement("beforeend",this._bodyEl)}_drawNavigation(){let t=document.createElement("div");t.classList.add("navigation");let e=document.createElement("button");e.classList.add("navigation-button","left"),e.addEventListener("click",this._onLeftClick.bind(this));let n=document.createElement("button");return n.classList.add("navigation-button","right"),n.addEventListener("click",this._onRightClick.bind(this)),this._navigationMonthID=this._generateRandomID("navigationlabel"),this._navigationMonthEl=document.createElement("span"),this._navigationMonthEl.id=this._navigationMonthID,this._navigationMonthEl.classList.add("navigation-label"),t.insertAdjacentElement("beforeend",e),t.insertAdjacentElement("beforeend",this._navigationMonthEl),t.insertAdjacentElement("beforeend",n),t}_drawBody(){let t=document.createElement("div"),a=null;t.classList.add("body");let e=this._getFirstDayOfMonth();var i=e.getDay();let n=this._getLastDayOfMonth();var s=n.getDate();let h=!1;var r=()=>{a=document.createElement("div"),a.classList.add("week")};r();for(let n=0;n<s+i;n++){h||n===i&&(h=!0);let e=document.createElement("div");if(e.classList.add("day"),h){let t=document.createElement("a");t.href="javascript:void",t.innerText=`${n-i+1}`,t.addEventListener("click",this._onDayClick.bind(this)),e.insertAdjacentElement("beforeend",t),e.addEventListener("click",this._onDayClick.bind(this))}else e.classList.add("disabled");a.insertAdjacentElement("beforeend",e),(n+1)%7||(t.insertAdjacentElement("beforeend",a),r())}return""!==a.innerHTML&&t.insertAdjacentElement("beforeend",a),t}_updateNavigation(){var t=`${this._months[this._month]} - ${this._year}`;document.getElementById(this._navigationMonthID).innerText=t}_updateBody(){this._bodyEl=this._drawBody(),this._bodyEl.id=this._bodyElID,document.getElementById(this._bodyElID).replaceWith(this._bodyEl)}}customElements.define("baby-calendar",BabyCalendar);export{BabyCalendar};